# WARNING! This file is automatically generated by "rake gen".
# WARNING! Any modification to it would be lost after another "rake gen" operation!

# Automatically generated at Wed Dec 02 14:29:47 +0800 2009

CC=gcc
CFLAGS=-Wall -Ixdk -Icore -Iinclude

all: prepare ndss

prepare: bin obj

bin:
	mkdir -p bin

obj:
	mkdir -p obj

xdk: obj/libxdk.a

obj/libxdk.a: obj/xdk_xmemory.obj obj/xdk_xutils.obj obj/xdk_xhash.obj 
	ar cq obj/libxdk.a $^
	ranlib obj/libxdk.a

obj/xdk_xmemory.obj: xdk/xmemory.c xdk/xmemory.h 
	$(CC) $(CFLAGS) -c xdk/xmemory.c -o obj/xdk_xmemory.obj

obj/xdk_xutils.obj: xdk/xutils.c xdk/xmemory.h xdk/xutils.h 
	$(CC) $(CFLAGS) -c xdk/xutils.c -o obj/xdk_xutils.obj

obj/xdk_xhash.obj: xdk/xhash.c xdk/xhash.h xdk/xmemory.h 
	$(CC) $(CFLAGS) -c xdk/xhash.c -o obj/xdk_xhash.obj



ndss: bin/ndss

obj/libndss.a: obj/core_attr.obj obj/core_ftp.obj 
	ar cq obj/libndss.a $^
	ranlib obj/libndss.a

bin/ndss: obj/libndss.a obj/libxdk.a obj/app_main.obj 
	$(CC) $(CFLAGS) obj/libndss.a obj/libxdk.a obj/app_main.obj  -o bin/ndss

obj/core_attr.obj: core/attr.c 
	$(CC) $(CFLAGS) -c core/attr.c -o obj/core_attr.obj

obj/core_ftp.obj: core/ftp.c 
	$(CC) $(CFLAGS) -c core/ftp.c -o obj/core_ftp.obj



obj/app_main.obj: app/main.c include/ndss.h include/xdk.h 
	$(CC) $(CFLAGS) -c app/main.c -o obj/app_main.obj



test: prepare ndss xdk bin/test_ftp bin/test_xhash bin/test_xmemory bin/test_xutils 

bin/test_ftp: test/test_ftp.c xdk/xmemory.h include/ndss.h include/xdk.h  obj/libxdk.a obj/libndss.a 
	$(CC) $(CFLAGS) test/test_ftp.c obj/libxdk.a obj/libndss.a  -o bin/test_ftp

bin/test_xhash: test/test_xhash.c xdk/xhash.h xdk/xmemory.h  obj/libxdk.a 
	$(CC) $(CFLAGS) test/test_xhash.c obj/libxdk.a  -o bin/test_xhash

bin/test_xmemory: test/test_xmemory.c xdk/xmemory.h  obj/libxdk.a 
	$(CC) $(CFLAGS) test/test_xmemory.c obj/libxdk.a  -o bin/test_xmemory

bin/test_xutils: test/test_xutils.c xdk/xutils.h  obj/libxdk.a 
	$(CC) $(CFLAGS) test/test_xutils.c obj/libxdk.a  -o bin/test_xutils



clean:
	rm -rf bin
	rm -rf obj


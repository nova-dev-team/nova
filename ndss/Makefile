# WARNING! This file is automatically generated by "rake gen".
# WARNING! Any modification to it would be lost after another "rake gen" operation!

# Automatically generated at Sun Dec 13 15:36:17 +0800 2009

CC=gcc
CFLAGS=-ggdb -Wall -Iapp -Icore -Itest -Ixdk -Indssclient -I3rdparty 
LDFLAGS=-lpthread

default: bin obj app 

bin:
	mkdir -p bin

obj:
	mkdir -p obj/3rdparty/crypto/md5
	mkdir -p obj/3rdparty/crypto/sha1
	mkdir -p obj/app/ftp
	mkdir -p obj/app/gateway
	mkdir -p obj/app/serv
	mkdir -p obj/core
	mkdir -p obj/ndssclient
	mkdir -p obj/test
	mkdir -p obj/xdk


api: app/serv/ndss_serv.h app/serv/ndss_serv.c app/ndss.c app/gateway/ndss_gw.h app/gateway/ndss_gw.c app/ftp/ftp_fs.c app/ftp/ndss_ftp.h app/ftp/ftp_fs.h app/ftp/ftp_session.c app/ftp/ndss_ftp.c app/ftp/ftp_session.h core/attr.c core/attr.h test/test_xmemory.c test/test_xhash.c test/test_md5sum.c test/test_xstr_startwith.c test/test_sha1.c test/test_xstr.c test/test_xitoa.c test/test_xvec.c test/test_xstr_strip.c xdk/xserver.c xdk/xhash.h xdk/xconn.c xdk/xmemory.h xdk/xhash.c xdk/xutils.c xdk/xcrypto.h xdk/xlog.h xdk/xconn.h xdk/xnet.c xdk/xstr.c xdk/xserver.h xdk/xvec.h xdk/xcrypto.c xdk/xutils.h xdk/xlog.c xdk/xmemory.c xdk/xnet.h xdk/xvec.c xdk/xstr.h ndssclient/ndss_client.h ndssclient/ndss_client.c 3rdparty/crypto/md5/md5.h 3rdparty/crypto/md5/md5.c 3rdparty/crypto/sha1/sha1.h 3rdparty/crypto/sha1/sha1.c 
	doxygen

clean:
	rm -rf bin
	rm -rf obj
	rm -rf api
	find . -iname *~ -delete

app: bin obj obj/app/serv/ndss_serv.o bin/ndss obj/app/ndss.o obj/app/gateway/ndss_gw.o obj/app/ftp/ftp_fs.o obj/app/ftp/ftp_session.o obj/app/ftp/ndss_ftp.o

obj/app/gateway/ndss_gw.o: app/gateway/ndss_gw.c app/gateway/ndss_gw.h
	$(CC) $(CFLAGS) -c app/gateway/ndss_gw.c -o obj/app/gateway/ndss_gw.o

obj/app/ftp/ndss_ftp.o: app/ftp/ndss_ftp.c xdk/xserver.h xdk/xconn.h xdk/xmemory.h xdk/xutils.h app/ftp/ndss_ftp.h app/ftp/ftp_session.h app/ftp/ftp_fs.h
	$(CC) $(CFLAGS) -c app/ftp/ndss_ftp.c -o obj/app/ftp/ndss_ftp.o

obj/app/serv/ndss_serv.o: app/serv/ndss_serv.c app/serv/ndss_serv.h
	$(CC) $(CFLAGS) -c app/serv/ndss_serv.c -o obj/app/serv/ndss_serv.o

obj/app/ftp/ftp_session.o: app/ftp/ftp_session.c app/ftp/ftp_session.h xdk/xstr.h
	$(CC) $(CFLAGS) -c app/ftp/ftp_session.c -o obj/app/ftp/ftp_session.o

obj/app/ndss.o: app/ndss.c xdk/xmemory.h app/ftp/ndss_ftp.h app/gateway/ndss_gw.h app/serv/ndss_serv.h
	$(CC) $(CFLAGS) -c app/ndss.c -o obj/app/ndss.o

obj/app/ftp/ftp_fs.o: app/ftp/ftp_fs.c ndssclient/ndss_client.h app/ftp/ftp_fs.h
	$(CC) $(CFLAGS) -c app/ftp/ftp_fs.c -o obj/app/ftp/ftp_fs.o

bin/ndss: obj/app/ndss.o obj/xdk/xmemory.o obj/app/ftp/ndss_ftp.o obj/app/gateway/ndss_gw.o obj/app/serv/ndss_serv.o obj/xdk/xserver.o obj/xdk/xconn.o obj/xdk/xutils.o obj/app/ftp/ftp_session.o obj/app/ftp/ftp_fs.o obj/xdk/xstr.o obj/ndssclient/ndss_client.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/app/ndss.o obj/xdk/xmemory.o obj/app/ftp/ndss_ftp.o obj/app/gateway/ndss_gw.o obj/app/serv/ndss_serv.o obj/xdk/xserver.o obj/xdk/xconn.o obj/xdk/xutils.o obj/app/ftp/ftp_session.o obj/app/ftp/ftp_fs.o obj/xdk/xstr.o obj/ndssclient/ndss_client.o -o bin/ndss


obj/core/attr.o: core/attr.c core/attr.h
	$(CC) $(CFLAGS) -c core/attr.c -o obj/core/attr.o

core: bin obj obj/core/attr.o


bin/test_xitoa: obj/test/test_xitoa.o obj/xdk/xutils.o obj/xdk/xmemory.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_xitoa.o obj/xdk/xutils.o obj/xdk/xmemory.o -o bin/test_xitoa

bin/test_xstr_startwith: obj/test/test_xstr_startwith.o obj/xdk/xutils.o obj/xdk/xmemory.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_xstr_startwith.o obj/xdk/xutils.o obj/xdk/xmemory.o -o bin/test_xstr_startwith

bin/test_xstr: obj/test/test_xstr.o obj/xdk/xstr.o obj/xdk/xmemory.o obj/xdk/xutils.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_xstr.o obj/xdk/xstr.o obj/xdk/xmemory.o obj/xdk/xutils.o -o bin/test_xstr

obj/test/test_xstr_startwith.o: test/test_xstr_startwith.c xdk/xutils.h
	$(CC) $(CFLAGS) -c test/test_xstr_startwith.c -o obj/test/test_xstr_startwith.o

obj/test/test_md5sum.o: test/test_md5sum.c xdk/xcrypto.h xdk/xmemory.h
	$(CC) $(CFLAGS) -c test/test_md5sum.c -o obj/test/test_md5sum.o

bin/test_xstr_strip: obj/test/test_xstr_strip.o obj/xdk/xutils.o obj/xdk/xmemory.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_xstr_strip.o obj/xdk/xutils.o obj/xdk/xmemory.o -o bin/test_xstr_strip

bin/test_sha1: obj/test/test_sha1.o obj/xdk/xmemory.o obj/xdk/xcrypto.o obj/3rdparty/crypto/md5/md5.o obj/3rdparty/crypto/sha1/sha1.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_sha1.o obj/xdk/xmemory.o obj/xdk/xcrypto.o obj/3rdparty/crypto/md5/md5.o obj/3rdparty/crypto/sha1/sha1.o -o bin/test_sha1

bin/test_xhash: obj/test/test_xhash.o obj/xdk/xhash.o obj/xdk/xmemory.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_xhash.o obj/xdk/xhash.o obj/xdk/xmemory.o -o bin/test_xhash

obj/test/test_xstr_strip.o: test/test_xstr_strip.c xdk/xutils.h
	$(CC) $(CFLAGS) -c test/test_xstr_strip.c -o obj/test/test_xstr_strip.o

bin/test_xvec: obj/test/test_xvec.o obj/xdk/xvec.o obj/xdk/xmemory.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_xvec.o obj/xdk/xvec.o obj/xdk/xmemory.o -o bin/test_xvec

obj/test/test_xitoa.o: test/test_xitoa.c xdk/xutils.h
	$(CC) $(CFLAGS) -c test/test_xitoa.c -o obj/test/test_xitoa.o

obj/test/test_xstr.o: test/test_xstr.c xdk/xstr.h xdk/xmemory.h
	$(CC) $(CFLAGS) -c test/test_xstr.c -o obj/test/test_xstr.o

obj/test/test_sha1.o: test/test_sha1.c xdk/xmemory.h xdk/xcrypto.h
	$(CC) $(CFLAGS) -c test/test_sha1.c -o obj/test/test_sha1.o

obj/test/test_xvec.o: test/test_xvec.c xdk/xvec.h xdk/xmemory.h
	$(CC) $(CFLAGS) -c test/test_xvec.c -o obj/test/test_xvec.o

bin/test_md5sum: obj/test/test_md5sum.o obj/xdk/xcrypto.o obj/xdk/xmemory.o obj/3rdparty/crypto/md5/md5.o obj/3rdparty/crypto/sha1/sha1.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_md5sum.o obj/xdk/xcrypto.o obj/xdk/xmemory.o obj/3rdparty/crypto/md5/md5.o obj/3rdparty/crypto/sha1/sha1.o -o bin/test_md5sum

obj/test/test_xhash.o: test/test_xhash.c xdk/xhash.h xdk/xmemory.h
	$(CC) $(CFLAGS) -c test/test_xhash.c -o obj/test/test_xhash.o

obj/test/test_xmemory.o: test/test_xmemory.c xdk/xmemory.h
	$(CC) $(CFLAGS) -c test/test_xmemory.c -o obj/test/test_xmemory.o

bin/test_xmemory: obj/test/test_xmemory.o obj/xdk/xmemory.o
	$(CC) $(CFLAGS) $(LDFLAGS) obj/test/test_xmemory.o obj/xdk/xmemory.o -o bin/test_xmemory

test: bin obj bin/test_xmemory obj/test/test_xmemory.o bin/test_xhash obj/test/test_xhash.o bin/test_md5sum obj/test/test_md5sum.o bin/test_xstr_startwith obj/test/test_xstr_startwith.o bin/test_sha1 obj/test/test_sha1.o bin/test_xstr obj/test/test_xstr.o bin/test_xitoa obj/test/test_xitoa.o bin/test_xvec obj/test/test_xvec.o bin/test_xstr_strip obj/test/test_xstr_strip.o


obj/xdk/xhash.o: xdk/xhash.c xdk/xhash.h xdk/xmemory.h
	$(CC) $(CFLAGS) -c xdk/xhash.c -o obj/xdk/xhash.o

obj/xdk/xlog.o: xdk/xlog.c xdk/xlog.h
	$(CC) $(CFLAGS) -c xdk/xlog.c -o obj/xdk/xlog.o

obj/xdk/xserver.o: xdk/xserver.c xdk/xserver.h xdk/xmemory.h xdk/xutils.h
	$(CC) $(CFLAGS) -c xdk/xserver.c -o obj/xdk/xserver.o

obj/xdk/xstr.o: xdk/xstr.c xdk/xstr.h xdk/xmemory.h xdk/xutils.h
	$(CC) $(CFLAGS) -c xdk/xstr.c -o obj/xdk/xstr.o

obj/xdk/xutils.o: xdk/xutils.c xdk/xmemory.h xdk/xutils.h
	$(CC) $(CFLAGS) -c xdk/xutils.c -o obj/xdk/xutils.o

obj/xdk/xnet.o: xdk/xnet.c xdk/xnet.h xdk/xstr.h
	$(CC) $(CFLAGS) -c xdk/xnet.c -o obj/xdk/xnet.o

obj/xdk/xvec.o: xdk/xvec.c xdk/xvec.h xdk/xmemory.h
	$(CC) $(CFLAGS) -c xdk/xvec.c -o obj/xdk/xvec.o

obj/xdk/xmemory.o: xdk/xmemory.c xdk/xmemory.h
	$(CC) $(CFLAGS) -c xdk/xmemory.c -o obj/xdk/xmemory.o

obj/xdk/xconn.o: xdk/xconn.c xdk/xconn.h xdk/xutils.h
	$(CC) $(CFLAGS) -c xdk/xconn.c -o obj/xdk/xconn.o

obj/xdk/xcrypto.o: xdk/xcrypto.c xdk/xcrypto.h xdk/xmemory.h 3rdparty/crypto/md5/md5.h 3rdparty/crypto/sha1/sha1.h
	$(CC) $(CFLAGS) -c xdk/xcrypto.c -o obj/xdk/xcrypto.o

xdk: bin obj obj/xdk/xserver.o obj/xdk/xconn.o obj/xdk/xhash.o obj/xdk/xutils.o obj/xdk/xnet.o obj/xdk/xstr.o obj/xdk/xcrypto.o obj/xdk/xlog.o obj/xdk/xmemory.o obj/xdk/xvec.o


obj/ndssclient/ndss_client.o: ndssclient/ndss_client.c ndssclient/ndss_client.h
	$(CC) $(CFLAGS) -c ndssclient/ndss_client.c -o obj/ndssclient/ndss_client.o

ndssclient: bin obj obj/ndssclient/ndss_client.o bin/libndssclient.a

bin/libndssclient.a: obj/ndssclient/ndss_client.o
	ar cq bin/libndssclient.a $^
	ranlib bin/libndssclient.a
	


3rdparty: bin obj obj/3rdparty/crypto/md5/md5.o obj/3rdparty/crypto/sha1/sha1.o

obj/3rdparty/crypto/sha1/sha1.o: 3rdparty/crypto/sha1/sha1.c 3rdparty/crypto/sha1/sha1.h
	$(CC) $(CFLAGS) -c 3rdparty/crypto/sha1/sha1.c -o obj/3rdparty/crypto/sha1/sha1.o

obj/3rdparty/crypto/md5/md5.o: 3rdparty/crypto/md5/md5.c 3rdparty/crypto/md5/md5.h
	$(CC) $(CFLAGS) -c 3rdparty/crypto/md5/md5.c -o obj/3rdparty/crypto/md5/md5.o


all: bin obj bin/libndssclient.a obj/ndssclient/ndss_client.o obj/xdk/xhash.o bin/test_xstr_startwith bin/test_xitoa obj/xdk/xlog.o bin/test_xstr obj/core/attr.o obj/3rdparty/crypto/md5/md5.o obj/3rdparty/crypto/sha1/sha1.o obj/xdk/xserver.o obj/test/test_md5sum.o obj/test/test_xstr_startwith.o obj/app/gateway/ndss_gw.o bin/test_xhash bin/test_sha1 bin/test_xstr_strip obj/xdk/xutils.o obj/xdk/xstr.o obj/xdk/xnet.o obj/test/test_xitoa.o bin/test_xvec obj/test/test_xstr_strip.o obj/test/test_xstr.o obj/app/serv/ndss_serv.o obj/app/ftp/ndss_ftp.o obj/xdk/xconn.o obj/xdk/xmemory.o obj/xdk/xvec.o obj/test/test_sha1.o bin/libndssclient.a obj/xdk/xcrypto.o bin/test_xmemory obj/test/test_xmemory.o obj/test/test_xhash.o bin/test_md5sum obj/test/test_xvec.o obj/app/ndss.o obj/app/ftp/ftp_session.o bin/ndss obj/app/ftp/ftp_fs.o 




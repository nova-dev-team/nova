# WARNING! This file is automatically generated by "rake gen".
# WARNING! Any modification to it would be lost after another "rake gen" operation!

# Automatically generated at Tue Dec 01 20:41:42 +0800 2009

CC=gcc
CFLAGS=-Wall -Ixdk -Icore

all: prepare ndss

prepare: bin obj

bin:
	mkdir -p bin

obj:
	mkdir -p obj

xdk: obj/libxdk.a

obj/libxdk.a: obj/xdk_xmemory.obj obj/xdk_xutils.obj obj/xdk_xhash.obj 
	ar cq obj/libxdk.a $^
	ranlib obj/libxdk.a

obj/xdk_xmemory.obj: xdk/xmemory.c xdk/xmemory.h 
	$(CC) $(CFLAGS) -c xdk/xmemory.c -o obj/xdk_xmemory.obj

obj/xdk_xutils.obj: xdk/xutils.c xdk/xmemory.h xdk/xutils.h 
	$(CC) $(CFLAGS) -c xdk/xutils.c -o obj/xdk_xutils.obj

obj/xdk_xhash.obj: xdk/xhash.c xdk/xhash.h xdk/xmemory.h 
	$(CC) $(CFLAGS) -c xdk/xhash.c -o obj/xdk_xhash.obj



ndss: bin/ndss

bin/ndss: obj/libxdk.a obj/core_remove.obj obj/core_attr.obj obj/core_put.obj obj/core_fetch.obj obj/core_serve.obj obj/core_rename.obj obj/core_main.obj obj/core_entry.obj 
	$(CC) $(CFLAGS) obj/libxdk.a obj/core_remove.obj obj/core_attr.obj obj/core_put.obj obj/core_fetch.obj obj/core_serve.obj obj/core_rename.obj obj/core_main.obj obj/core_entry.obj  -o bin/ndss

obj/core_remove.obj: core/remove.c 
	$(CC) $(CFLAGS) -c core/remove.c -o obj/core_remove.obj

obj/core_attr.obj: core/attr.c 
	$(CC) $(CFLAGS) -c core/attr.c -o obj/core_attr.obj

obj/core_put.obj: core/put.c 
	$(CC) $(CFLAGS) -c core/put.c -o obj/core_put.obj

obj/core_fetch.obj: core/fetch.c 
	$(CC) $(CFLAGS) -c core/fetch.c -o obj/core_fetch.obj

obj/core_serve.obj: core/serve.c 
	$(CC) $(CFLAGS) -c core/serve.c -o obj/core_serve.obj

obj/core_rename.obj: core/rename.c 
	$(CC) $(CFLAGS) -c core/rename.c -o obj/core_rename.obj

obj/core_main.obj: core/main.c xdk/xutils.h 
	$(CC) $(CFLAGS) -c core/main.c -o obj/core_main.obj

obj/core_entry.obj: core/entry.c 
	$(CC) $(CFLAGS) -c core/entry.c -o obj/core_entry.obj



test: prepare ndss xdk bin/test_xhash bin/test_xmemory bin/test_xutils 

bin/test_xhash: test/test_xhash.c xdk/xhash.h xdk/xmemory.h  obj/libxdk.a 
	$(CC) $(CFLAGS) test/test_xhash.c obj/libxdk.a  -o bin/test_xhash

bin/test_xmemory: test/test_xmemory.c xdk/xmemory.h  obj/libxdk.a 
	$(CC) $(CFLAGS) test/test_xmemory.c obj/libxdk.a  -o bin/test_xmemory

bin/test_xutils: test/test_xutils.c xdk/xutils.h  obj/libxdk.a 
	$(CC) $(CFLAGS) test/test_xutils.c obj/libxdk.a  -o bin/test_xutils



clean:
	rm -rf bin
	rm -rf obj


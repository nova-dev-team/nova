<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     Mar 24, 2011 9:31:31 PM                                                        

     Nova
     Virtualization management system
                   
     Santa Zhang (santa1987@gmail.com)
     ====================================================================== -->
<project name="Nova" default="build">
	<description>
    	Virtualization management system
    </description>


	<target name="build" description="build project">
		<mkdir dir="bin/build" />
		<javac srcdir="src" destdir="bin/build" includeantruntime="false">
			<classpath>
				<fileset dir="lib">
					<include name="**/*.jar" />
				</fileset>
			</classpath>
		</javac>
	</target>


	<target name="test" description="run junit4 tests">
		<mkdir dir="bin/build/junit-temp" />
		<junit showoutput="false" printsummary="true" haltonfailure="false" fork="yes" forkmode="perTest" dir="bin/build" timeout="900000" errorProperty="tests.failed" failureProperty="tests.failed">
			<classpath>
				<path>
					<pathelement location="conf/" />
					<pathelement location="bin/build" />
					<pathelement location="src/test" />
					<fileset dir="lib/">
						<include name="**/*.jar" />
					</fileset>
				</path>
			</classpath>
			<formatter type="xml" />
			<batchtest todir="bin/build" unless="testcase">
				<fileset dir="src/test" includes="**/*Test*.java" excludes="**/*Demo*.java">
				</fileset>
			</batchtest>
		</junit>
	</target>


	<target name="clean" description="clean build files">
		<delete dir="bin/build/" />
	</target>

</project>

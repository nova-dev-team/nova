<html>
<head>


<title>Nova platform: Welcome!</title>

<link href="/stylesheets/prototype_window/default.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/prototype_window/alphacube.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/prototype_window/mac_os_x.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/iphone_checkbox/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/javascripts/prototype.js"> </script>
<script type="text/javascript" src="/javascripts/effects.js"> </script>
<script type="text/javascript" src="/javascripts/prototype_window/window.js"> </script>
<script type="text/javascript" src="/javascripts/prototype_window/window_effects.js"> </script>
<script type="text/javascript" src="/javascripts/iphone_checkbox/iphone_checkbox.js"> </script>
<script type="text/javascript" src="/javascripts/js_progressbar/js_progressbar.js"> </script>
<%= growl4rails_includes %>
<style type="text/css" media="screen">

body {
  margin: 0;
  margin-bottom: 25px;
  padding: 0;
  background-color: #f0f0f0;
  font-family: "Lucida Grande", "Bitstream Vera Sans", "Verdana";
  font-size: 13px;
  color: #333;
}

h1 {
  font-size: 28px;
  color: #000;
}

a {
  color: #03c
}

a:hover {
  background-color: #03c;
  color: white;
  text-decoration: none;
}

#page {
  position: absolute;
  background-color: gray;
  width: 750px;
  height: 400px;
}

.inputPlaceHolder {
  color: gray;
}
 
</style>
<script type="text/javascript">

  function do_login() {
    $('login_form').submit();
  }

  function do_signup() {
/*    Dialog.confirm($("signup_div").innerHTML, {
      width: 240,
      id: "signup_win",
      className: "mac_os_x",
      blurClassName: "blur_os_x",
      title: "Sign up form"
    });*/
    var win = new Window({
      className: "mac_os_x",
      blurClassName: "blur_os_x",
      title: "demo_win1",
      width: 400,
      height: 300,
      top: 340,
      left: 230
    });
    win.getContent().update("WTF!");
    win.show();
    Growl4Rails.showGrowl({
      image_path: "/images/rails.png",
      title: "Registration data sent",
      message: "Please <font color='red'><b>wait</b></font> for administrator's approval"
    });
  }
  
  function getWindowWidth() {
    return window.innerWidth || (window.document.documentElement.clientWidth || window.document.body.clientWidth);
  }
  
  function getWindowHeight() {
    return window.innerHeight || (window.document.documentElement.clientHeight || window.document.body.clientHeight);
  }
  
  // put the login panel to the center
  function centerPanel() {
    var panel = $("page");
    panel.setStyle("left:" + (getWindowWidth() - panel.getWidth()) / 2);
    panel.setStyle("top:" + (getWindowHeight() - panel.getHeight()) / 2);
  }
  
  window.onload = function() {
    
    window.onresize = centerPanel;
    centerPanel();
    
    $("page").show(); // prevents blinking

    // required to setup iphone-like checkbox
    new iPhoneStyle('input[type=checkbox]', {
      checkedLabel: "YES",  // default is "ON"
      uncheckedLabel: "NO"  // default is "OFF"
    });

    // create custom progress bar
    pbar1 = new JS_BRAMUS.jsProgressBar(
      $('progressbar_custom1'),
      75, {
        showText: false,
        animate:  true,
        width:    154,
        height:   11,
        boxImage: '/images/bramus/custom1_box.gif',
        barImage: '/images/bramus/custom1_bar.gif'
      }
    );

    pbar2 = new JS_BRAMUS.jsProgressBar(
      $('progressbar_custom2'),
      52, {
        barImage: Array(
          '/images/bramus/percentImage_back4.png',
          '/images/bramus/percentImage_back3.png',
          '/images/bramus/percentImage_back2.png',
          '/images/bramus/percentImage_back1.png'
        ),
        onTick: function(pb) {
          switch (pb.getPercentage()) {
            case 98:
              alert("We are 98");
            break;
          }
          return true;
        }
      }
    );


    var login_field = $('login');
    login_field.value = "username";

    var password_field = $('password');
    password_field.value = "password";
    
    function decorate_field(field) {
      field.addClassName("inputPlaceHolder");
      field.onclick = function () {
        field.value = "";
        field.removeClassName("inputPlaceHolder");
        field.onkeydown = function(e) {
          if (e.keyCode == 13) {
            do_login();
          }
        }
      }
    }

    decorate_field(login_field);
    decorate_field(password_field);
  }

</script>
</head>
<body>
<div id="page" style="display: none;">
  <h1>Nova Login <%=h params[:error_msg] %> </h1>

  <% form_tag session_path, :id => 'login_form' do -%>

  <%= text_field_tag 'login', @login %>

  <%= password_field_tag 'password', nil %>
<!--
  <p><%= label_tag 'remember_me', 'Remember me' %>
  <%= check_box_tag 'remember_me', '1', @remember_me %></p>
-->
  <a href='#' onclick="do_login(); return false">Login</a>

  <a href="#" onclick="do_signup(); return false">Sign Up</a>


  <input type="checkbox" />
  <%= link_to_prototype_dialog("show a confirm win", "say hi", 'alert', {:title => "Demo win", :className => "mac_os_x", :width => 340, :height => 300}) %>

  <% end -%>
</div>

<div id="demos">
  <span class="progressBar">15%</span>
  <span id="progressbar_custom1"></span>
  <span id="progressbar_custom2"></span>
</div>

<div id="signup_div" style="display: none;">
  This is the text
  <input type='text'></input>
  <input type='button'></input>
  <input type='checkbox'></input>
</div>
</body></html>

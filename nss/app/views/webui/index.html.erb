<%
require 'utils'

conf = common_conf
storage_type = conf["storage_type"]
storage_root = conf["storage_root"]  
%>

<html>
<head>
<title>Nova NSS</title>

<link type="text/css" rel="stylesheet" href="/stylesheets/custom_buttons.css"></link>
<link type="text/css" rel="stylesheet" href="/stylesheets/webui_style.css"></link>

<script type="text/javascript" src="/javascripts/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="/javascripts/jquery.blockUI.js"></script>
<script type="text/javascript" src="/javascripts/jquery.json-1.3.min.js"></script>
<script type="text/javascript" src="/javascripts/nova.nss.webui.js"></script>

<script type="text/javascript">

$(document).ready(function () {
  list_filesystem("/nova/storage/vdisks");
  load_vdisks();
});

</script>
</head>

<body>

<h1>Nova NSS</h1>
<%=
  node_hostname = ""
  if File.exists? "#{RAILS_ROOT}/tmp/hostname"
    node_hostname = "hostname: " + (File.read "#{RAILS_ROOT}/tmp/hostname") + "<br>"
  end
  node_hostname
%>
<%=
  version_name = ""
  if File.exists? "#{RAILS_ROOT}/../VERSION"
    version_name = "version: " + (File.read "#{RAILS_ROOT}/../VERSION") + "<br>"
  end
  version_name
%>
<hr/>

<h2>Browse filesystem</h2>
<div id='fsdiv'></div>
<hr/>

<h2>Registered vdisks</h2>
<div id='vdisks_div'></div>

Vdisk filename: <input type='text' id="new_vdisk_name"></input>
Pool size: <input type='text' id="new_pool_size"></input>
<button type='button' class='btn' onclick="register_vdisk()"><span><span>Register vdisk</span></span></button>
<br/>
* NOTE: vdisk images MUST be located at <b>/nova/storage/vdisks</b>!
<hr/>

This is the "NSS" module of the Nova system. <b>Intended for developers only!</b><p>
&copy;2009-2010 <a href="mailto:nova-develop@googlegroups.com">Nova Development Team</a>.

</body>
</html>

